/*! Pc.Heigh-ho.Renovation-1.0.0.js 2017-03-23 */
!function(){var a=angular.module("heeyhomeApp"),b="/api/public/shopinfo",c="/api/public/order/client/selstatus",d=$.cookie("dd");d=null!=d&&""!=d&&void 0!=d?JSON.parse(d):{};var e={init:function(){e.initEvent()},initEvent:function(){var a=this;a.initWebDataEvent(),a.initOnLoadWebEvent()},initWebDataEvent:function(){var a=this;a.initAppointmentTimeEvent(),a.initWebRefreshEvent()},initAppointmentTimeEvent:function(){$.ajax({url:b,type:"GET",async:!0,dataType:"jsonp",data:{shop_id:d.shop_id},success:function(a){$("#JshopId").prepend(a.data.shop_name)},error:function(){}})},initWebRefreshEvent:function(){var a=spliceWaitcontactContHandler;$.ajax({url:c,type:"GET",async:!0,dataType:"jsonp",data:{user_id:d.user_id,order_id:d.order_id},beforeSend:function(){$("#Jul").addClass("loagbg")},success:function(b){$("#JcreateTime").prepend(b.data.order_time),$("#Jul").append(a.spliceorderStatusDataEvent(b.data))},complete:function(){$("#Jul").removeClass("loagbg")},error:function(){}})},initOnLoadWebEvent:function(){var a=spliceWaitcontactContHandler;$(document).on("click",".change",function(){$("#Jul").empty(),$.ajax({url:c,type:"GET",async:!0,dataType:"jsonp",data:{user_id:d.user_id,order_id:d.order_id},beforeSend:function(){$("#Jul").addClass("loagbg")},success:function(b){$("#Jul").append(a.spliceorderStatusDataEvent(b.data))},complete:function(){$("#Jul").removeClass("loagbg")},error:function(){}})})}};spliceWaitcontactContHandler={spliceorderStatusDataEvent:function(a){var b="",c="",d="",e="",f="",g="";if(8==parseInt(a.order_status_id))switch(a.order_status_id){case"8":g+='<li class="detail_active"><em></em><p><span id="Jday8" class="date">'+a.order_status_time[8].split(" ")[0]+"</span>",g+=' <span id="Jtime8" class="time">'+a.order_status_time[8].split(" ")[1]+"</span>",g+=' <span class="detail_text">店小二已取消本次订单了</span></p>',g+="<div>快去和店小二沟通一下吧;</div></li> ";case"1":var h=getTimeHandler.getTimeEvent(a.order_time,8);c+='<li class="detail_active"><em></em><p><span id="Jday1" class="date">'+a.order_time.split(" ")[0]+'</span><span id="Jtime1" class="time">'+a.order_time.split(" ")[1]+'</span><span class="detail_text">您的需求已提交给店小二</span>',c+='</p></li><li class="'+(1!=a.order_status_id?"detail_active":"")+'"><em></em><p><span id="Jday2" class="date">'+a.order_time.split(" ")[0]+'</span><span id="Jtime2" class="time">'+a.order_time.split(" ")[1]+'</span><span class="detail_text">店小二正在确认您的预约需求并会联系您，请您耐心等待</span></p>',c+='<div><span class="detail_text">预计&nbsp;<i>'+h+'</i>&nbsp;前会确定您的预定信息,当前预定信息会在<a href="center.html#/center/morder" target="_blank" >我的订单</a>中呈现;</span>',c+='你可以去浏览下我们的虚拟现实来为您的新家做些参考;<a href="../#/panorama" target="_blank">去看看</a></div></li>'}else if(7==parseInt(a.order_status_id))switch(a.order_status_id){case"7":f+='<li class="detail_active"><em></em><p><span id="Jday7" class="date">'+a.order_status_time[7].split(" ")[0]+"</span>",f+=' <span id="Jtime7" class="time">'+a.order_status_time[7].split(" ")[1]+"</span>",f+=' <span class="detail_text">订单已经取消</span></p>',f+="<div>快去和店小二沟通一下吧;</div></li> ";case"1":var h=getTimeHandler.getTimeEvent(a.order_time,8);c+='<li class="detail_active"><em></em><p><span id="Jday1" class="date">'+a.order_time.split(" ")[0]+'</span><span id="Jtime1" class="time">'+a.order_time.split(" ")[1]+'</span><span class="detail_text">您的需求已提交给店小二</span>',c+='</p></li><li class="'+(1!=a.order_status_id?"detail_active":"")+'"><em></em><p><span id="Jday2" class="date">'+a.order_time.split(" ")[0]+'</span><span id="Jtime2" class="time">'+a.order_time.split(" ")[1]+'</span><span class="detail_text">店小二正在确认您的预约需求并会联系您，请您耐心等待</span></p>',c+='<div><span class="detail_text">预计&nbsp;<i>'+h+'</i>&nbsp;前会确定您的预定信息,当前预定信息会在<a href="center.html#/center/morder" target="_blank" >我的订单</a>中呈现;</span>',c+='你可以去浏览下我们的虚拟现实来为您的新家做些参考;<a href="../#/panorama" target="_blank">去看看</a></div></li>'}else switch(a.order_status_id){case"4":e+='<li class="detail_active"><em></em><p><span id="Jday5" class="date">'+a.order_status_time[4].split(" ")[0]+"</span>",e+=' <span id="Jtime5" class="time">'+a.order_status_time[4].split(" ")[1]+"</span>",e+=' <span class="detail_text">工长已经上传预支付单，请立即支付(<a href="reservation.html#/advancelist?pos='+a.order_id+'">去看看</a>)</span></p>',e+="</li> ";case"3":d+='<li class="'+(3!=a.order_status_id?"detail_active":"")+'"><em></em><p><span id="Jday4" class="date">'+a.order_status_time[3].split(" ")[0]+"</span>",d+=' <span id="Jtime4" class="time">'+a.order_status_time[3].split(" ")[1]+"</span>",d+=' <span class="detail_text">店铺接受您的预约需求，预约上门时间为 '+a.reservation_time.split(" ")[0]+"</span></p>",d+="<div>请等待工长上门量房</div></li> ";case"1":var h=getTimeHandler.getTimeEvent(a.order_time,8);c+='<li class="detail_active"><em></em><p><span id="Jday1" class="date">'+a.order_time.split(" ")[0]+'</span><span id="Jtime1" class="time">'+a.order_time.split(" ")[1]+'</span><span class="detail_text">您的需求已提交给店小二</span>',c+='</p></li><li class="'+(1!=a.order_status_id?"detail_active":"")+'"><em></em><p><span id="Jday2" class="date">'+a.order_time.split(" ")[0]+'</span><span id="Jtime2" class="time">'+a.order_time.split(" ")[1]+'</span><span class="detail_text">店小二正在确认您的预约需求并会联系您，请您耐心等待</span></p>',c+='<div><span class="detail_text">预计&nbsp;<i>'+h+'</i>&nbsp;前会确定您的预定信息,当前预定信息会在<a href="center.html#/center/morder" target="_blank" >我的订单</a>中呈现;</span>',c+='你可以去浏览下我们的虚拟现实来为您的新家做些参考;<a href="../#/panorama" target="_blank">去看看</a></div></li>'}return 1==a.order_status_id?b=c:3==a.order_status_id?b=c+d:4==a.order_status_id?(b=c+d+e,$(".three_process").addClass("contact_active")):7==a.order_status_id?(b=c+f,$(".three_process").addClass("contact_active"),$(".three_process").find("span").html("接单失败")):8==a.order_status_id?(b=c+g,$(".three_process").addClass("contact_active"),$(".three_process").find("span").html("接单失败")):window.location.href="reservation.html#/advancelist?pos="+a.order_id,b}},getTimeHandler={getTimeEvent:function(a,b){date=a.substring(0,19),date=date.replace(/-/g,"/");var c=new Date(date).getTime(),d=60*b*1e3*60,e=new Date(parseInt(c+d)).toLocaleString().replace(/\//g,"-");return e}},a.controller("waitcontactCtrl",["$scope","$http",function(){e.init()}])}();